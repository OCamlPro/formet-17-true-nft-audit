
The implementation of NFT studied in this document is a Proof of Concept
of how NFT primitives should be built in FreeTON.
%
It does not correspond to the actual implementation of an NFT that would
be deployed.
%
However, it appears that the contracts must not be inherited as such as
the deployment and salting primitives must be specialized, as well as
the different contratcs holding information (Data for example).
%
The different contract of TrueNFT-core should be modified, or at minimum 
be a source of inspiration.
%
Considering this special aspect of the contract, serving as a 
\emph{specification written in Solidity}, we focused this audit on two 
aspects.
%
First, we checked for issues in the NFT-Core logic, i.e. how the different
contract and data interactions were implemented with respect to what an NFT
should be.
%
Second, as an usual audit, we searched for actual issues in the code.
%
While this second kind of issues may not be relevant (as the project is a 
POC that should be modified), we assumed that if this repository is expected
to be a reference, it should be perfect in every regard. 

\section{Specification}

Non Fungible Tokens are deployed from a \textbf{NftRoot} contract which will
be the basis of all minted tokens.
%
This contract has two purposes.
\begin{itemize}
    \item The deployment of a \textbf{Data} contract, representing a fraction of the
    digitalized asset. So as to easily retrieve the information of the asset, 
    it deploys two \textbf{Index} contracts: one retrievable from the NftRoot address,
    the owner's address and the Data address, and one from the NftRoot address
    and the owner's only. 
    \item The deployment of an \textbf{IndexBasis} contract with the Data code hash.
\end{itemize}

These four contracts represent the whole NFT core implementation.
%
Many interesting features of this infrastructure comes from the use of salted code
for generating specific code hashes that can be found with specific instructions accessible 
by DeBots.
%
This audit does not discuss the retrivability of the contracts, but our study of the TrueNFT 
functioning did not show critical issues in this regard.

\section{Generic issues}

Before reading in detail the source code, several issues (mostly coding habits) affected the
project as a whole. We list them in this section.

\issueMajor{Funds accessibility and bounced messages}{
    Unless a contract is destroyed (which is not the case for all contracts), 
    funds are not accessible.
    %
    There is no error handling, especially for bounced messages, which allow
    funds to be stored on contracts.
}

\issueMinor{Unsafe assumptions of message origin}{
    The messages are assumed to be from a contract; the case msg.sender == address(0)
    is never treated.
}

\issueMinor{Naming convention}{
    Static variables should start with a prefix like "s\_" and
    globals should start with a prefix like "g\_" or "m\_"
    and internal/private functions should start with "\_".
}
